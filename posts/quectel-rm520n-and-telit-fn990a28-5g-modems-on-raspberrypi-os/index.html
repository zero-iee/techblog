<!doctype html><html lang=de data-theme=dark><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>Quectel RM520M und Telit FM990A28 5G Modem mit Raspberry Pi OS nutzen - ZERO GmbH Tech Blog</title><meta name=description content="Auf unserer Odyssee auf der Suche nach einem 5G Mobilfunkmodem haben wir mittlerweile einige Modems verschiedener Hersteller ausprobiert. Leider war die Inbetriebnahme nicht immer erfolgreich. Mal fehlte der Treibersupport im Linux-Kernel gänzlich - mal war die Ansteuerung via NetworkManager / ModemManager fehlerbehaftet oder überhaupt nicht möglich.
Uns ist eine einfache Inbetriebnahme und ein stabiler Betrieb wichtig. Da wir die Modems nicht nur auf einigen wenigen Geräten einsetzen wollen, kommt für uns eine manuelle Anpassung des Linux-Kernels in der Regel nicht infrage. Zu groß ist der damit verbundene Aufwand und zu unübersichtlich sind die Folgen, die sich daraus für den weiteren Lebenszyklus eines Produkts ergeben. Daher soll das Betriebssystem - oftmals ein Raspberry Pi OS - möglichst im Werkszustand und ohne große Anpassungen genutzt werden.
Mittlerweile haben sich für uns zwei Modems herauskristallisiert, die in Kombination mit dem aktuellen Raspberry Pi OS auf Debian 11 &ldquo;Bullseye&rdquo; Basis (Kernel 6.1) &ldquo;out of the box&rdquo; funktionieren:"><link rel=icon type=image/x-icon href=https://blog.zero-iee.com/favicon.ico><link rel=apple-touch-icon-precomposed href=https://blog.zero-iee.com/favicon.png><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><link rel=stylesheet href=https://blog.zero-iee.com/css/style.min.930d4b2abd5c36f0b4decc538651a976d4e2c8f2f5c29312c354f3ca383468ae.css integrity="sha256-kw1LKr1cNvC03sxThlGpdtTiyPL1wpMSw1Tzyjg0aK4="><script src=https://blog.zero-iee.com/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js type=text/javascript integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script><meta property="og:title" content="Quectel RM520M und Telit FM990A28 5G Modem mit Raspberry Pi OS nutzen"><meta property="og:description" content="Auf unserer Odyssee auf der Suche nach einem 5G Mobilfunkmodem haben wir mittlerweile einige Modems verschiedener Hersteller ausprobiert. Leider war die Inbetriebnahme nicht immer erfolgreich. Mal fehlte der Treibersupport im Linux-Kernel gänzlich - mal war die Ansteuerung via NetworkManager / ModemManager fehlerbehaftet oder überhaupt nicht möglich.
Uns ist eine einfache Inbetriebnahme und ein stabiler Betrieb wichtig. Da wir die Modems nicht nur auf einigen wenigen Geräten einsetzen wollen, kommt für uns eine manuelle Anpassung des Linux-Kernels in der Regel nicht infrage. Zu groß ist der damit verbundene Aufwand und zu unübersichtlich sind die Folgen, die sich daraus für den weiteren Lebenszyklus eines Produkts ergeben. Daher soll das Betriebssystem - oftmals ein Raspberry Pi OS - möglichst im Werkszustand und ohne große Anpassungen genutzt werden.
Mittlerweile haben sich für uns zwei Modems herauskristallisiert, die in Kombination mit dem aktuellen Raspberry Pi OS auf Debian 11 &ldquo;Bullseye&rdquo; Basis (Kernel 6.1) &ldquo;out of the box&rdquo; funktionieren:"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.zero-iee.com/posts/quectel-rm520n-and-telit-fn990a28-5g-modems-on-raspberrypi-os/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-31T12:44:58+02:00"><meta property="article:modified_time" content="2023-05-31T12:44:58+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Quectel RM520M und Telit FM990A28 5G Modem mit Raspberry Pi OS nutzen"><meta name=twitter:description content="Auf unserer Odyssee auf der Suche nach einem 5G Mobilfunkmodem haben wir mittlerweile einige Modems verschiedener Hersteller ausprobiert. Leider war die Inbetriebnahme nicht immer erfolgreich. Mal fehlte der Treibersupport im Linux-Kernel gänzlich - mal war die Ansteuerung via NetworkManager / ModemManager fehlerbehaftet oder überhaupt nicht möglich.
Uns ist eine einfache Inbetriebnahme und ein stabiler Betrieb wichtig. Da wir die Modems nicht nur auf einigen wenigen Geräten einsetzen wollen, kommt für uns eine manuelle Anpassung des Linux-Kernels in der Regel nicht infrage. Zu groß ist der damit verbundene Aufwand und zu unübersichtlich sind die Folgen, die sich daraus für den weiteren Lebenszyklus eines Produkts ergeben. Daher soll das Betriebssystem - oftmals ein Raspberry Pi OS - möglichst im Werkszustand und ohne große Anpassungen genutzt werden.
Mittlerweile haben sich für uns zwei Modems herauskristallisiert, die in Kombination mit dem aktuellen Raspberry Pi OS auf Debian 11 &ldquo;Bullseye&rdquo; Basis (Kernel 6.1) &ldquo;out of the box&rdquo; funktionieren:"></head><body><a class=skip-main href=#main>Zum Hauptinhalt springen</a><div class=container><header class=common-header><div class=header-top><div class=header-logo></div><h1 class=site-title><a href=/>ZERO GmbH Tech Blog</a></h1><ul class=social-icons><li><a href=https://techhub.social/@zeroiee title=Mastodon rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></span></a></li><li><a href=https://github.com/zero-iee title=Github rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></li><li><a href=https://de.linkedin.com/company/zero-iee title=Linkedin rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a></li></ul></div><nav></nav></header><main id=main tabindex=-1><article class="post h-entry"><div class=post-header><header><h1 class="p-name post-title">Quectel RM520M und Telit FM990A28 5G Modem mit Raspberry Pi OS nutzen</h1><span><ul class=post-translations><li>DE</li><li><a href=https://blog.zero-iee.com/en/posts/quectel-rm520n-and-telit-fn990a28-5g-modems-on-raspberrypi-os/>EN</a></li></ul></span></header></div><div class="content e-content"><p>Auf unserer Odyssee auf der Suche nach einem 5G Mobilfunkmodem haben wir mittlerweile einige Modems verschiedener Hersteller ausprobiert. Leider war die Inbetriebnahme nicht immer erfolgreich. Mal fehlte der Treibersupport im Linux-Kernel gänzlich - mal war die Ansteuerung via NetworkManager / ModemManager fehlerbehaftet oder überhaupt nicht möglich.</p><p>Uns ist eine einfache Inbetriebnahme und ein stabiler Betrieb wichtig. Da wir die Modems nicht nur auf einigen wenigen Geräten einsetzen wollen, kommt für uns eine manuelle Anpassung des Linux-Kernels in der Regel nicht infrage. Zu groß ist der damit verbundene Aufwand und zu unübersichtlich sind die Folgen, die sich daraus für den weiteren Lebenszyklus eines Produkts ergeben. Daher soll das Betriebssystem - oftmals ein Raspberry Pi OS - möglichst im Werkszustand und ohne große Anpassungen genutzt werden.</p><p><strong>Mittlerweile haben sich für uns zwei Modems herauskristallisiert, die in Kombination mit dem aktuellen <a href=https://www.raspberrypi.com/software/operating-systems/>Raspberry Pi OS</a> auf Debian 11 &ldquo;Bullseye&rdquo; Basis (Kernel 6.1) &ldquo;out of the box&rdquo; funktionieren:</strong></p><ul><li><strong><a href=https://www.quectel.com/product/5g-rm520n-gl>Quectel RM520N</a></strong></li><li><strong><a href=https://www.telit.com/devices/fn990axx/>Telit FM990A28</a></strong></li></ul><p>beide 5G Modems unterstützen nicht nur das aktuell weit verbreitete &ldquo;5G New Radio&rdquo; mit LTE Control Plane (NSA), sondern auch 5G NR Standalone (SA), sodass bei einer entsprechenden Ausbaustufe des 5G Mobilfunknetzes auch von extrem niedrigeren Latenzen profitiert werden kann.</p><h2 id=hardware-setup>Hardware Setup
<span><a href=#hardware-setup><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Unser Hardware-Setup für die Evaluierung beider Module sieht wie folgt aus:</p><ul><li>Raspberry Pi CM4</li><li><a href=https://www.waveshare.com/wiki/CM4-DUAL-ETH-4G/5G-BASE>Waveshare Dual Ethernet IoT Base Board</a> (mit M.2 Slot)</li><li>Telit FM990A28 M.2 Modul <em>oder</em></li><li>Quectel RM520N</li><li>IoT SIM-Karte der Deutschen Telekom</li></ul><figure><img src=images/waveshare-board.jpg><figcaption><h4>Waveshare Board mit Quectel 5G Modem</h4></figcaption></figure><h2 id=inbetriebnahme>Inbetriebnahme
<span><a href=#inbetriebnahme><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Die Inbetriebnahme unseres Telit-Moduls lief wie folgt ab: <em>(ähnlich für Quectel!)</em></p><p>Überprüfen der Sichtbarkeit des Moduls im USB Subsystem:</p><pre><code>$ lsusb
</code></pre><p>Hier sollte ein Telit Device sichtbar sein:</p><pre><code>[...]
Bus 002 Device 003: ID 1bc7:1070 Telit Wireless Solutions FN990
[...]
</code></pre><p>Auch der ModemManager sollte das Modul erkennen:</p><pre><code>tom@raspberry:~ $ mmcli -L
/org/freedesktop/ModemManager1/Modem/0 [Telit] FN990A28
</code></pre><p>Mittels</p><pre><code>mmcli -m 0
</code></pre><p>Können einige Details zum Modem ausgegeben werden - unter anderem, ob eine Verbindung zum Mobilfunknetz besteht, oder eine SIM-Karte zugeordnet ist.</p><p>Bei unserem ersten Versuch wurde im &ldquo;Status&rdquo; Abschnitt ein rotes <code>sim-missing</code> angezeigt, obwohl eine SIM-Karte in den Slot des Waveshare Base IO Moduls eingelegt war. Auch Versuche mit anderen SIM-Karten nutzten nichts - im System wurde keine Karte erkannt.</p><h3 id=sim-missing-problem-beheben>&ldquo;SIM Missing&rdquo; Problem beheben
<span><a href=#sim-missing-problem-beheben><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p><em>(dieses Problem betrifft nur das Telit Modem!)</em></p><p>Ein Blick in die <a href=https://www.waveshare.com/w/upload/4/46/CM4-DUAL-ETH-4G_5G-BASE_SchDoc.pdf>Schematics des Waveshare Boards</a> offenbarte, dass die Signalleitung (&ldquo;CD&rdquo; - &ldquo;Card detect&rdquo;) für die physische Erkennung einer SIM-Karte im Slot nicht zum M.2 Slot weitergeführt wird, sodass das Mobilfunkmodul kein entsprechendes Signal erkennen <em>kann</em>. Kein Wunder also, dass uns permanent ein &ldquo;<strong>sim-missing</strong>&rdquo; angezeigt wurde.</p><figure><img src=images/waveshare-schematics.png><figcaption><h4>Screenshot des Waveshare Dual Ethernet IoT Base Boards</h4></figcaption></figure><p>Das Problem lässt sich beheben, indem das Modem so konfiguriert wird, dass es eine immer eingelegte SIM-Karte annimmt und keine HotSwap-Abfragen mehr durchführt. Die Konfiguration geschieht über AT-Kommandos innerhalb einer Terminalsession mit dem Modem selbst:</p><pre><code>sudo apt install minicom
sudo minicom -D /dev/ttyUSB2
</code></pre><p>AT-Kommandos absetzen - sollten mit &ldquo;OK&rdquo; quittiert werden.</p><pre><code>AT#HSEN=0,0
AT#HSEN=0,1
</code></pre><p><em>(genauer genommen wird hier HotSwap für beide potentiellen SIM-Steckplätze, die das Modem unterstützt, deaktiviert.)</em></p><p>Die Minicom Session kann mit CTRL-A gefolgt von &ldquo;X&rdquo; beendet werden.</p><p>Damit die Änderung angewendet wird, wurde das Raspi samt Modem neu gestartet / die Stromversorgung unterbrochen.</p><p>Nach einem Neustart wurde die SIM-Karte im ModemManager schließlich erkannt - am Ende der Ausgabe von <code>mmcli -m 0</code> wurde eine &ldquo;SIM&rdquo; Zeile mit dem D-Bus Pfad zum SIM-Device eingeblendet:</p><pre><code>SIM      |            dbus path: /org/freedesktop/ModemManager1/SIM/0
</code></pre><p><strong>Die soeben erwähnte Anpassung am Telit Modem ist am Quectel-Modem nicht notwendig!</strong></p><p>Im nächsten Schritt wird das jeweiligen Modem aktiviert:</p><pre><code>mmcli -m 0 --enable
</code></pre><h3 id=eine-verbindung-mittels-networkmanager-einrichten>Eine Verbindung mittels NetworkManager einrichten
<span><a href=#eine-verbindung-mittels-networkmanager-einrichten><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Mittels NetworkManager wird nun eine neue Mobilfunkverbindung eingerichtet. Dazu legen wir im NetworkManager eine neue &ldquo;Connection&rdquo; an. Im Hintergrund kommuniziert dieser mit dem ModemManager, um APN-Details an ihn weiterzugeben.</p><p>Für unsere Telekom-Karte sind folgende APN-Informationen zu nutzen:</p><ul><li>APN: internet.telekom</li><li>IP-Type: ipv4</li><li>Username: telekom</li><li>Password: tm</li></ul><p>Die APN-Informationen eines jeden Providers lassen sich schnell im Internet nachschlagen.</p><p>Mit dem neueren IPv6-fähigen APN der Telekom <code>internet.v6.telekom</code> (und &ldquo;ipv4v6&rdquo;) hatten wir leider kein Glück - wir konnten keine Vebindung herstellen. Probleme im IPv6-Stack der Modemtreiber sind uns bereits bekannt. Evtl. kommen sie auch hier zum tragen. Daher begnügen wir uns vorerst mit reinem IPv4 Support.</p><p>Bevor die Verbindung angelegt werden kann, muss sichergestellt sein, dass der NetworkManager läuft:</p><pre><code>systemctl enable --now NetworkManager
</code></pre><p>Auf einem Stock Raspberry Pi OS Image ist dies nicht der Fall. Ein Reboot nach dem systemctl Kommando kann nicht schaden. In unserem Fall funktionierte das Zusammenspiel zwischen den beiden Managern erst nach einem Reboot.</p><p>Schließlich wird mit diesem Kommando eine neue GSM Verbindung im NetworkManager angelegt:</p><pre><code>mmcli c add type gsm ifname cdc-wdm0 con-name telekom apn internet.telekom connection.autoconnect yes
</code></pre><p>Im Falle der Telekom ist der APN &ldquo;internet.telekom&rdquo; inkl. der übrigen Parameter bereits im SIM-Profil hinterlegt, sodass nur noch der Name des passenden APN-Profils angegeben werden muss. Auf Benutzername und Passwort kann idR verzichtet werden.</p><p>Sollte das nicht funktionieren, können alternativ auch weitere Parameter mitgegeben werden, wie z.B.</p><pre><code>mmcli c add type gsm ifname cdc-wdm0 con-name telekom apn internet.telekom gsm.username telekom gsm.password tm gsm.pin 1234 connection.autoconnect yes
</code></pre><p>Insbes. die Angabe einer <code>gsm.pin</code> ist wichtig, falls die SIM-Karte mit einer PIN geschützt ist. Unsere SIM ist nicht mit einer PIN geschützt, daher entfällt die Angabe.</p><p>Ein <code>nmcli c</code> sollte nun zeigen, dass eine neue Verbindung &ldquo;telekom&rdquo; angelegt wurde. Ist die Verbindung grün markiert, hat die Anmeldung im Netzwerk funktioniert:</p><figure><img src=images/networkmanager-ok.png><figcaption><h4>nmcli c</h4></figcaption></figure><p>Auch der ModemManager sollte nach einer kurzen Weile ähnlich wie hier aussehen und ein &ldquo;connected&rdquo; im Status zeigen: <em>(<code>mmcli -m 0</code>)</em></p><figure><img src=images/modemmanager-ok.png><figcaption><h4>mmcli -m 0</h4></figcaption></figure><h3 id=funktion-prüfen>Funktion prüfen
<span><a href=#funktion-pr%c3%bcfen><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h3><p>Ob die Mobilfunkverbindung tatsächlich funktioniert, lässt sich schnell und einfach über einen Ping auf dem Mobilfunk-Device prüfen:</p><pre><code>ping -I wwan0 1.1.1.1
</code></pre><p>Die Latenz bewegt sich bei einem 5G NSA Netz üblicherweise bei >= 25 ms, kann aber stark schwanken. Wir haben Latenzen von bis zu 600 ms beobachtet - abhängig von Empfang und Auslastung des Netzwerks.</p><p>Bei einem Neustart des Raspberry Pis wird die Mobilfunkverbindung automatisch neu aufgenommen.</p><p>Übrigens: Ein <code>ip route</code> offenbart, dass NetworkManager eine Defaultroute für das 5G Modem angelegt hat. Da diese aber mit einer Metrik von 700 versehen ist, wird auf das Mobilfunkmodem nur zurückgegegriffen, falls ein Ziel über eine möglicherwiese vorhandene Ethernetverbindung nicht erreichbar ist. Ein <code>apt update</code> und alles andere sollte also normalerweise über eine verfügbare Ethernetverbindung laufen. Ist diese nicht verfügbar, dient die Mobilfunkverbindung als Fallback (daher der <code>-I wwan0</code> Parameter im <code>ping</code> Kommando - hiermit wird eine Verbindung via Mobilfunk erzwungen).</p></div><div class=post-info>Von Thomas Leister &lt;thomas.leister@zero-iee.com><div class="post-date dt-published">2023-05-31</div><a class="post-hidden-url u-url" href=https://blog.zero-iee.com/posts/quectel-rm520n-and-telit-fn990a28-5g-modems-on-raspberrypi-os/>https://blog.zero-iee.com/posts/quectel-rm520n-and-telit-fn990a28-5g-modems-on-raspberrypi-os/</a>
<a href=https://blog.zero-iee.com class="p-name p-author post-hidden-author h-card" rel=me>Thomas Leister &lt;thomas.leister@zero-iee.com></a><div class=post-taxonomies><ul class=post-tags><li><a href=https://blog.zero-iee.com/tags/5g/>#5g</a></li><li><a href=https://blog.zero-iee.com/tags/connectivity/>#connectivity</a></li><li><a href=https://blog.zero-iee.com/tags/raspberrypi/>#raspberrypi</a></li><li><a href=https://blog.zero-iee.com/tags/quectel/>#quectel</a></li><li><a href=https://blog.zero-iee.com/tags/mobilfunk/>#mobilfunk</a></li></ul></div></div></article></main><footer class=common-footer><ul class=language-select><li>Deutsch</li><li><a href=https://blog.zero-iee.com/en/posts/quectel-rm520n-and-telit-fn990a28-5g-modems-on-raspberrypi-os/>English</a></li></ul><div class=common-footer-bottom><div class=copyright><p>© ZERO GmbH, ZERO GmbH Team, 2023 | <a href=/impressum/>Impressum</a> | <a href=/datenschutz/>Datenschutz</a><br>Erstellt mit <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, Markdown and Git<br>Theme <a target=_blank rel="noopener noreferrer" href=https://github.com/zero-iee/hugo-theme-anubis-zero>Anubis ZERO</a> basierend auf <a href=https://github.com/Mitrichius/hugo-theme-anubis>Mitrichius/hugo-theme-anubis</a>.<br></p></div><script>const STORAGE_KEY="user-color-scheme",defaultTheme="dark-without-switcher";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia("(prefers-color-scheme: dark)");const autoChangeScheme=e=>{currentTheme=e.matches?"dark":"light",document.documentElement.setAttribute("data-theme",currentTheme),changeButtonText()};document.addEventListener("DOMContentLoaded",function(){switchButton=document.querySelector(".theme-switcher"),currentTheme=detectCurrentScheme(),currentTheme=="dark"&&document.documentElement.setAttribute("data-theme","dark"),currentTheme=="auto"&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),switchButton&&(changeButtonText(),switchButton.addEventListener("click",switchTheme,!1)),showContent()});function detectCurrentScheme(){return localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"light"}function changeButtonText(){switchButton&&(switchButton.textContent=currentTheme=="dark"?"Helles Theme":"Dunkles Theme")}function switchTheme(){currentTheme=="dark"?(localStorage.setItem(STORAGE_KEY,"light"),document.documentElement.setAttribute("data-theme","light"),currentTheme="light"):(localStorage.setItem(STORAGE_KEY,"dark"),document.documentElement.setAttribute("data-theme","dark"),currentTheme="dark"),changeButtonText()}function showContent(){document.body.style.visibility="visible",document.body.style.opacity=1}</script></div><p class="h-card vcard"><a href=https://blog.zero-iee.com class="p-name u-url url fn" rel=me>ZERO GmbH Team</a></p></footer><a rel=me href=https://techhub.social/@zeroiee style=display:none>Mastodon</a></div></body></html>